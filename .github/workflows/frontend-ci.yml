# Simple Frontend CI
#
# PURPOSE: Coordinate simple frontend workflows
# WHY: Keep it simple and run basic checks
# WHEN: Runs on every push/PR to frontend code

name: Simple Frontend CI

# When to run this workflow
on:
  push:
    branches: [ main, develop ]
    paths:
      - 'moneywise-app/**'
      - '.github/workflows/frontend-*.yml'
  pull_request:
    branches: [ main, develop ]
    paths:
      - 'moneywise-app/**'
      - '.github/workflows/frontend-*.yml'

jobs:
  # JOB 1: Check code quality (linting, formatting, types)
  lint:
    name: ğŸ” Code Quality
    uses: ./.github/workflows/frontend-lint.yml
    secrets: inherit

  # JOB 2: Run tests
  test:
    name: ğŸ§ª Tests
    uses: ./.github/workflows/frontend-test.yml
    secrets: inherit

  # JOB 3: Verify the app
  build:
    name: ğŸ“± Verify App
    needs: [lint, test]  # Only verify if linting and tests pass
    uses: ./.github/workflows/frontend-build.yml
    secrets: inherit

  # JOB 4: Simple summary
  summary:
    name: ğŸ“Š Summary
    runs-on: ubuntu-latest
    needs: [lint, test, build]
    if: always()  # Always run, even if other jobs fail

    steps:
      - name: ğŸ“‹ Show Results
        run: |
          lint_result="${{ needs.lint.result }}"
          test_result="${{ needs.test.result }}"
          build_result="${{ needs.build.result }}"

          echo "=== Frontend CI Results ==="
          echo "Code Quality: $lint_result"
          echo "Tests: $test_result"
          echo "App Verification: $build_result"

          if [ "$lint_result" = "success" ] && [ "$test_result" = "success" ] && [ "$build_result" = "success" ]; then
            echo "âœ… All frontend checks passed!"
          else
            echo "âŒ Some frontend checks failed!"
          fi
